# 货币类型添加功能

## 概述

为系统添加了完整的货币类型支持，包括马来西亚林吉特（MYR）等多种货币类型，提升了系统的国际化能力。

## 功能特性

### 1. 货币类型定义

在 `lib/data.ts` 中添加了完整的货币类型定义：

```typescript
export const CURRENCY_TYPES = {
  CNY: "人民币 (CNY)",
  USD: "美元 (USD)",
  EUR: "欧元 (EUR)",
  GBP: "英镑 (GBP)",
  JPY: "日元 (JPY)",
  MYR: "马来西亚林吉特 (MYR)",
  SGD: "新加坡元 (SGD)",
  HKD: "港币 (HKD)",
  KRW: "韩元 (KRW)",
  AUD: "澳元 (AUD)",
  CAD: "加拿大元 (CAD)",
  CHF: "瑞士法郎 (CHF)"
} as const
```

### 2. 银行账户管理更新

#### 2.1 货币选择器
- 在银行账户创建/编辑表单中添加了货币类型选择器
- 支持所有定义的货币类型
- 使用下拉菜单形式，显示货币代码和名称

#### 2.2 余额显示优化
- 根据货币类型显示正确的货币符号
- 支持多种货币符号：
  - MYR: RM (马来西亚林吉特)
  - USD: $ (美元)
  - EUR: € (欧元)
  - GBP: £ (英镑)
  - JPY: ¥ (日元)
  - SGD: S$ (新加坡元)
  - HKD: HK$ (港币)
  - KRW: ₩ (韩元)
  - AUD: A$ (澳元)
  - CAD: C$ (加拿大元)
  - CHF: CHF (瑞士法郎)
  - CNY: ¥ (人民币)

### 3. 默认银行账户配置

更新了默认银行账户配置，添加了马来西亚银行账户示例：

```typescript
{
  name: "马来西亚银行账户",
  bankName: "马来西亚银行",
  accountNumber: "1234********5678",
  balance: 0,
  currency: "MYR",
  isActive: true
}
```

### 4. 银行交易显示优化

#### 4.1 货币格式化函数
添加了 `formatCurrency` 函数，支持根据货币类型显示正确的货币符号：

```typescript
const formatCurrency = (amount: number, currency: string = "CNY"): string => {
  const currencySymbols: { [key: string]: string } = {
    'MYR': 'RM',
    'USD': '$',
    'EUR': '€',
    'GBP': '£',
    'JPY': '¥',
    'SGD': 'S$',
    'HKD': 'HK$',
    'KRW': '₩',
    'AUD': 'A$',
    'CAD': 'C$',
    'CHF': 'CHF',
    'CNY': '¥'
  }
  
  const symbol = currencySymbols[currency] || '¥'
  return `${symbol}${amount.toFixed(2)}`
}
```

#### 4.2 交易金额显示
- 支出金额：使用货币格式化函数显示
- 收入金额：使用货币格式化函数显示
- 累计余额：使用货币格式化函数显示

## 使用方法

### 1. 创建银行账户

1. 访问银行账户管理页面：`/bank-account-management`
2. 点击"添加银行账户"
3. 填写账户信息，选择货币类型
4. 保存账户

### 2. 查看多账户交易

1. 访问多账户银行交易页面：`/test-bank-transactions-multi-account`
2. 查看不同货币账户的交易记录
3. 观察不同货币的显示格式

### 3. 货币类型选择

在创建或编辑银行账户时，可以从以下货币类型中选择：

- **人民币 (CNY)** - 默认货币
- **美元 (USD)** - 美元
- **欧元 (EUR)** - 欧元
- **英镑 (GBP)** - 英镑
- **日元 (JPY)** - 日元
- **马来西亚林吉特 (MYR)** - 马来西亚货币
- **新加坡元 (SGD)** - 新加坡货币
- **港币 (HKD)** - 香港货币
- **韩元 (KRW)** - 韩国货币
- **澳元 (AUD)** - 澳大利亚货币
- **加拿大元 (CAD)** - 加拿大货币
- **瑞士法郎 (CHF)** - 瑞士货币

## 技术实现

### 1. 数据结构

- **BankAccount接口**：包含 `currency` 字段
- **CURRENCY_TYPES常量**：定义所有支持的货币类型
- **CurrencyType类型**：TypeScript类型定义

### 2. 组件更新

- **银行账户管理组件**：添加货币选择器和显示优化
- **银行交易组件**：添加货币格式化函数
- **多账户银行交易组件**：支持不同货币的显示

### 3. 默认配置

- 更新了默认银行账户配置
- 添加了马来西亚银行账户示例
- 保持了向后兼容性

## 优势

### 1. 国际化支持
- 支持多种国际货币
- 正确的货币符号显示
- 为未来扩展更多货币做好准备

### 2. 用户体验
- 直观的货币选择界面
- 清晰的货币符号显示
- 统一的格式化标准

### 3. 系统灵活性
- 每个银行账户可以设置不同货币
- 支持多货币账户管理
- 便于财务管理和报表

## 未来扩展

1. **汇率转换**：添加实时汇率转换功能
2. **多货币报表**：支持多货币财务报表
3. **货币偏好设置**：用户可设置默认货币
4. **更多货币支持**：根据需求添加更多货币类型
5. **货币格式化本地化**：根据地区设置不同的格式化规则

## 注意事项

1. **数据迁移**：现有银行账户默认使用CNY货币
2. **货币符号显示**：确保系统字体支持所有货币符号
3. **精度处理**：不同货币可能有不同的小数位数要求
4. **汇率管理**：如需汇率转换功能，需要额外的汇率API集成 