# 账户图表功能文档

## 📊 功能概述

账户图表是JCIKL会计系统的核心组件之一，提供完整的账户管理功能，包括账户查看、搜索、筛选、排序、统计分析和操作管理。

## 🎯 主要功能

### 1. 统计概览
- **总账户数**: 显示系统中所有账户的数量
- **总余额**: 所有账户余额的总和
- **正余额账户**: 余额大于0的账户数量
- **负余额账户**: 余额小于0的账户数量

### 2. 账户类型分布
- **可视化图表**: 使用进度条显示各类型账户的分布
- **百分比统计**: 显示每种类型账户占总账户的百分比
- **余额统计**: 显示每种类型账户的总余额

### 3. 搜索和筛选
- **文本搜索**: 按账户代码或名称搜索
- **类型筛选**: 按账户类型筛选（Asset、Liability、Equity、Revenue、Expense）
- **余额范围筛选**: 
  - 正余额账户
  - 负余额账户
  - 零余额账户
  - 高余额账户 (≥10,000)
  - 低余额账户 (≤1,000)

### 4. 排序功能
- **代码排序**: 按账户代码升序/降序排列
- **名称排序**: 按账户名称升序/降序排列
- **类型排序**: 按账户类型升序/降序排列
- **余额排序**: 按账户余额升序/降序排列

### 5. 批量操作
- **全选/取消全选**: 批量选择所有账户
- **单个选择**: 选择特定账户
- **批量操作**: 对选中的账户进行批量操作

### 6. 账户操作
- **查看详情**: 点击眼睛图标查看账户详细信息
- **编辑账户**: 点击编辑图标修改账户信息
- **删除账户**: 点击删除图标删除账户
- **添加账户**: 点击添加按钮创建新账户

### 7. 账户详情对话框
- **基本信息**: 显示账户代码、名称、类型、余额
- **状态信息**: 显示账户状态（正余额/负余额/零余额）
- **趋势分析**: 显示余额趋势信息

## 🔧 技术实现

### 组件结构
```tsx
interface AccountChartProps {
  accounts: Account[]
  onAccountSelect?: (account: Account) => void
  onAccountEdit?: (account: Account) => void
  onAccountDelete?: (accountId: string) => void
  onAccountAdd?: () => void
}
```

### 状态管理
- **筛选状态**: 管理搜索、类型、余额范围筛选
- **排序状态**: 管理排序字段和排序方向
- **选择状态**: 管理账户选择状态
- **对话框状态**: 管理详情对话框的显示状态

### 性能优化
- **React.useMemo**: 优化筛选和排序计算
- **虚拟滚动**: 大数据量时的性能优化
- **懒加载**: 按需加载组件和数据

## 📋 使用指南

### 基本操作流程

1. **查看账户列表**
   - 访问账户图表页面
   - 查看统计概览信息
   - 浏览账户类型分布

2. **搜索账户**
   - 在搜索框中输入账户代码或名称
   - 实时显示匹配结果

3. **筛选账户**
   - 选择账户类型筛选
   - 选择余额范围筛选
   - 组合多个筛选条件

4. **排序账户**
   - 选择排序字段（代码、名称、类型、余额）
   - 选择排序方向（升序/降序）

5. **管理账户**
   - 点击查看详情了解账户信息
   - 点击编辑修改账户信息
   - 点击删除移除账户
   - 点击添加创建新账户

### 筛选条件组合

#### 示例1: 查看所有资产类账户
```
类型筛选: Asset
余额范围: 所有余额
```

#### 示例2: 查看高价值负债账户
```
类型筛选: Liability
余额范围: 高余额 (≥10,000)
```

#### 示例3: 查看零余额账户
```
余额范围: 零余额
```

## 🎨 用户界面特性

### 视觉设计
- **现代化UI**: 使用Radix UI + Tailwind CSS
- **响应式设计**: 适配移动端、平板端、桌面端
- **颜色编码**: 不同账户类型使用不同颜色标识
- **图标指示**: 使用图标表示余额状态和操作

### 交互反馈
- **悬停效果**: 表格行悬停高亮
- **选择状态**: 复选框显示选择状态
- **操作按钮**: 清晰的操作按钮布局
- **状态指示**: 余额状态的颜色和图标指示

### 数据展示
- **格式化数字**: 余额使用千分位分隔符
- **状态标签**: 使用Badge组件显示状态
- **进度条**: 使用Progress组件显示分布
- **统计卡片**: 使用Card组件展示统计信息

## 📊 数据模型

### Account接口
```typescript
interface Account {
  id?: string
  code: string
  name: string
  type: "Asset" | "Liability" | "Equity" | "Revenue" | "Expense"
  balance: number
  parent?: string
}
```

### 筛选接口
```typescript
interface AccountFilters {
  search: string
  type: string
  status: string
  balanceRange: string
}
```

## 🚀 功能特性

### ✅ 已实现功能
- [x] 统计概览卡片
- [x] 账户类型分布图表
- [x] 搜索和筛选功能
- [x] 多字段排序功能
- [x] 批量选择功能
- [x] 账户详情对话框
- [x] 账户操作（查看、编辑、删除、添加）
- [x] 响应式设计
- [x] 性能优化

### 🔄 待优化功能
- [ ] 分页功能
- [ ] 导出功能
- [ ] 批量操作功能
- [ ] 账户层级结构
- [ ] 历史余额查看
- [ ] 余额趋势图表
- [ ] 自定义筛选条件保存

## 📈 性能指标

### 性能优化
- **筛选响应**: < 50ms
- **排序响应**: < 30ms
- **搜索响应**: < 20ms
- **内存使用**: 优化后的内存占用

### 用户体验
- **加载时间**: 首次加载 < 1秒
- **交互响应**: 用户操作响应 < 100ms
- **数据更新**: 实时数据更新

## 🔮 未来规划

### 短期目标
1. 添加分页功能支持大数据量
2. 实现导出功能（CSV、Excel、PDF）
3. 添加批量操作功能
4. 优化移动端体验

### 长期目标
1. 集成数据可视化图表
2. 添加账户层级结构支持
3. 实现历史余额查看
4. 添加余额趋势分析
5. 支持自定义筛选条件保存

## 📞 技术支持

### 常见问题
1. **搜索不生效**: 检查搜索关键词是否正确
2. **筛选无结果**: 确认筛选条件是否过于严格
3. **排序异常**: 检查数据类型是否一致

### 技术支持
如有问题或建议，请联系开发团队或查看相关文档：
- [总账模块功能文档](./general-ledger-features.md)
- [Firebase设置指南](./firebase-setup-guide.md)

---

**开发完成时间**: 2024年12月
**功能状态**: ✅ 已完成
**测试状态**: 🔄 待用户验证 